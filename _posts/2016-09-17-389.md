---
layout: post
title: 使用windump监控流量
description: 使用windump监控流量
date:   2016-09-17 22:50:18 +0800 
tags: [lua]
categories: [topic]
---
windump相关于linux和mac上的tcpdump，有些场景在windows平台上使用windump要比wireshark方便一些,wireshark是GUI形式的，还支持lua插件，有机会我们介绍wireshark的lua插件，windump是一个分析tcp/udp/icmp等协议监控的一个好工具，简单介绍一下使用，后期我们就是使用windump.exe这个命令行工具，分要我们应用服务器，分析我们的服务器承受压力的极限。


1.显示出所以的网卡设备。-D可以列出本机所有的网卡设备，包括VPN或是虚拟机建立的虚拟网卡。

windump.exe  -D

2. 监听指定网卡。-i 后面紧跟数字序号，表示本地网卡对应的序号，用 -D显示出来的序号。

windump.exe -i 1

-i 的后面跟的数字，就是本机网卡的序号名。


3. 监听指定协议数据。udp的字样是我们指定监控udp协议的流量。

windump.exe -i 1 udp


4. 监听指定端口数据。指定端口后就只监听流过这个端口的流量数据。

windump.exe -i 1 udp port 1234

5. 监听指定主机的数据。指定IP只监听本机上和这个IP有关的数据包。

windump.exe -i 1 udp port 1234 and host 192.168.0.1

6.写流量记录到文件中。我们把监听的数据包存起来，便于以后分析。

windump.exe  -w cap.txt -i 1 udp port 1234 and host 192.168.0.1

7.读取文本件的流量信息。-w存起来的数据不是明文的，需要用-F显示出正常的ACSII码，让人能看懂。

windump -F cap.txt


官方文档介绍的是最全的：

https://www.winpcap.org/windump/docs/manual.htm