---
layout: post
title: OpenrestyChina一个Merge引起的BUG
description: OpenrestyChina一个Merge引起的BUG
date:   2016-09-17 22:50:18 +0800 
categories: [topic]
---
作者：糖果

因为在对应一个issue时，遗漏了reset_last_reply的最后一个形参last_reply_time，造成了主页列表的最后回复人无法显示。


```lua
function topic_model:reset_last_reply(topic_id, user_id, user_name, last_reply_time) -- 更新最后回复人
        local now = utils.now()
        db:query("update topic set last_reply_id=?, last_reply_name=?, last_reply_time=? where id=?",
                {tonumber(user_id), user_name, last_reply_time, tonumber(topic_id)})
end
```


后来因为这个问题，不引发了一个计论就是，LOR到底是不是MVC结构的，或是说到底有没有C控制。